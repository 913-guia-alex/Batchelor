@model List<Licenta.Models.Classes>

@{
    ViewBag.Title = "Gym Classes";
}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />

<style>
    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }

    .gym-card {
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
        padding: 20px;
        width: calc(50% - 20px);
    }

        .gym-card h3 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .gym-card p {
            margin: 5px 0;
            font-size: 16px;
        }

        .gym-card span {
            font-size: 18px;
            font-weight: bold;
            color: #007bff;
        }


    .center-button {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: 20px;
    }


    .menu-items {
        display: inline-block;
        text-align: center;
        margin: 20px auto;
        background-color: #007bff;
        color: #ffffff;
        border: none;
        font-size: 0.9rem; 
        cursor: pointer;
        border-radius: 13px;
        padding: 10px 15px; 
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: background-color 0.3s ease;
    }

        .menu-items:hover {
            background-color: #0056b3;
        }

    .gym-classes {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
    }

    .class-card {
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        padding: 20px;
        width: calc(33.33% - 20px);
        margin-bottom: 20px;
    }

        .class-card h3 {
            font-size: 20px;
            margin-bottom: 10px;
        }

        .class-card p {
            margin-bottom: 5px;
            font-size: 16px;
        }

    .class-actions {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

        .class-actions button {
            cursor: pointer;
            border: none;
            background: none;
            font-size: 16px;
            color: #007bff;
        }

            .class-actions button:hover {
                color: #0056b3;
            }

    .slide-menu {
        position: fixed;
        top: 50px;
        left: 0;
        width: 180px;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        color: #000000;
        padding: 20px;
        box-sizing: border-box;
        transition: transform 0.3s ease-in-out, left 0.3s ease-in-out; 
        z-index: 1000;
        transform: translateX(-250px); 
    }

        .slide-menu ul {
            list-style: none;
            padding: 0;
            margin: 0; 
        }

            .slide-menu ul li {
                margin-bottom: 10px; 
                padding-left: 0; 
                border-bottom: 1px solid #ffffff; 
            }

                .slide-menu ul li:last-child {
                    border-bottom: none; 
                }

                .slide-menu ul li a {
                    cursor: pointer;
                    display: block; 
                    padding: 10px; 
                    border-radius: 15px; 
                    color: #ffffff; 
                }

        .slide-menu.show {
            transform: translateX(0); 
        }

    .menu-toggle {
        position: fixed;
        top: 20px;
        left: 30px;
        cursor: pointer;
        z-index: 1100;
        color: #fff;
        font-size: 24px;
    }

        .menu-toggle i {
            transition: transform 0.3s ease-in-out;
        }

        .menu-toggle.show i {
            transform: rotate(180deg); 
        }



    .modal-container {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        align-items: center;
        justify-content: center;
        z-index: 1;
    }

    .modal-content {
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        max-width: 400px;
        width: 100%;
        padding: 20px;
        text-align: center;
    }

    .button-container {
        display: flex;
        justify-content: space-around;
    }

    .button {
        padding: 10px 20px;
        font-size: 16px;
        text-align: center;
        text-decoration: none;
        border-radius: 5px;
        cursor: pointer;
    }
        .button:hover {
            transform: scale(1.05); 
            transition: transform 0.3s ease;
        }


    .cancel-button {
        background-color: #ccc;
        color: #535353;
    }

        .cancel-button:hover {
            background-color: #bbb;
        }

    .delete-button {
        background-color: #e74c3c;
        color: #fff;
    }

        .delete-button:hover {
            background-color: #c0392b; 
        }
</style>

<div class="container">
    <h2 style="text-align: center; font-size: 32px; padding-top: 30px;">Gym Classes</h2>

    <div class="menu-toggle" onclick="toggleSlideMenu()">
        <i class="fas fa-bars"></i>
    </div>


    <div class="slide-menu" id="slideMenu">
        <ul>
            <li><a href="/Authenticate/Login"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
            <li><a href="/Class/GymClasses"><i class="fas fa-class"></i> Classes</a></li>
        </ul>
    </div>

    @if (Model != null && Model.Any())
    {
        <div class="gym-classes">
            @foreach (var classObj in Model)
            {
                <div class="gym-card">
                    <a href="/Class/UpdateClassView?id=@classObj.idcl"><i class="fas fa-exclamation-circle"></i></a>
                    <h3>@classObj.name</h3>
                    <p><strong>Coach:</strong> @classObj.CoachName</p>
                    <p><strong>Description:</strong> @classObj.description</p>
                    <p><strong>Date:</strong> @classObj.date.ToShortDateString()</p>
                    <p><strong>Time:</strong> @classObj.time.ToString()</p>
                    <button class="btn btn-danger" onclick="showDeleteConfirmation('@classObj.idcl')"><i class="fas fa-trash-alt"></i></button>
                </div>
            }
        </div>
    }
    else
    {
        <p style="text-align: center; font-size: 20px; color: #555; line-height: 1.5;">Hey there! Looks like you currently do not have any classes at your gyms... No worries, let's fix that! Click the button below to explore and add some classes to your gym.</p>
    }

    <div class="center-button">
        <a class="menu-items" href="/Class/AddSpecificClass?idg=@ViewBag.GymId">
            Add Specific Class
        </a>
    </div>


    <div id="deleteModal" class="modal-container">
        <div class="modal-content">
            <h2>Delete Confirmation</h2>
            <p class="confirmation-message">
                Are you sure you want to delete this coach?
            </p>
            <div class="button-container">
                <button id="cancelDeleteBtn" class="button cancel-button">
                    Cancel
                </button>
                <button id="confirmDeleteBtn" class="button delete-button">
                    Delete
                </button>
            </div>
        </div>
    </div>

</div>



<script>
    function toggleSlideMenu() {
        var slideMenu = document.getElementById("slideMenu");
        slideMenu.classList.toggle("show");
    }

    function handleButtonClick(url) {
        window.location.href = url;
    }

    function redirectToAddSpecificClass() {
        var gymId = "@ViewBag.GymId"; 
        window.location.href = "/Class/AddSpecificClass?idg=" + gymId;
    }


    function showDeleteConfirmation(idcl) {
        const modal = document.getElementById('deleteModal');
        modal.style.display = 'flex';
        const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
        confirmDeleteBtn.onclick = function () {
            deleteClass(idcl);
            hideModal('deleteModal');
        }
        const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');
        cancelDeleteBtn.onclick = function () {
            hideModal('deleteModal');
        }
    }

    function deleteClass(idcl) {
        $.ajax({
            type: "POST",
            url: "/Class/DeleteClass",
            data: { id: idcl },
            success: function () {
                location.reload();
            }
        });
    }

    function hideModal(modalId) {
        const modal = document.getElementById(modalId);
        modal.style.display = 'none';
    }


</script>



