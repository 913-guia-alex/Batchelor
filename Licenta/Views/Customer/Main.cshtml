@using Licenta.Models

@{
    ViewBag.Title = "Customer Details";
}

@functions {
    public bool IsExpired(DateTime expirationDate)
    {
        return DateTime.Today > expirationDate;
    }
}


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />

<style>

    .container {
        max-width: 1200px;
    }

    .gym-card {
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
        display: flex;
        flex-direction: column;
    }

        .gym-card h3 {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .gym-card p {
            margin: 5px 0;
            font-size: 16px;
        }

        .gym-card span {
            font-size: 18px;
            font-weight: bold;
            color: #007bff;
        }



    .menu-items {
        width: 170px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1rem 1.5rem; 
        background-color: white;
        border: none;
        font-size: 1.1rem;
        cursor: pointer;
        border-radius: 13px !important; 
    }

    .menu-items {
        width: auto;
        height: auto;
        text-align: center;
        margin: 20px auto; 
        background-color: #007bff; 
        color: #ffffff;
        border: none;
        font-size: 1.1rem;
        cursor: pointer;
        border-radius: 13px;
        padding: 15px; 
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); 
        transition: background-color 0.3s ease; 
    }

        .menu-items:hover {
            background-color: #0056b3; 
        }


    .gym-memberships {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
    }

    .gym-membership-card {
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        width: 80%;
        padding: 20px;
        margin: 20px;
       
    }

    .gym-name {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 10px;
    }

    .price {
        color: #007bff;
        margin-bottom: 10px;
    }

    .dates {
        color: #6c757d;
    }

    .made-date,
    .expiration-date {
        font-size: 14px;
        margin-bottom: 5px;
    }



    .slide-menu {
        position: fixed;
        top: 50px;
        left: 0;
        width: 180px;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        color: #000000;
        padding: 20px;
        box-sizing: border-box;
        transition: transform 0.3s ease-in-out, left 0.3s ease-in-out; 
        z-index: 1000;
        transform: translateX(-250px);
    }

        .slide-menu ul {
            list-style: none;
            padding: 0;
            margin: 0; 
        }

            .slide-menu ul li {
                margin-bottom: 10px; 
                padding-left: 0; 
                border-bottom: 1px solid #ffffff; 
            }

                .slide-menu ul li:last-child {
                    border-bottom: none;
                }

                .slide-menu ul li a {
                    cursor: pointer;
                    display: block;
                    padding: 10px; 
                    border-radius: 15px; 
                    color: #ffffff;
                }

        .slide-menu.show {
            transform: translateX(0); 
        }

    .menu-toggle {
        position: fixed;
        top: 20px;
        left: 30px;
        cursor: pointer;
        z-index: 1100;
        color: #fff;
        font-size: 24px;
    }

        .menu-toggle i {
            transition: transform 0.3s ease-in-out;
        }

        .menu-toggle.show i {
            transform: rotate(180deg); 
        }


</style>

<div class="container body-content">
    <h2 style="text-align: center; font-size: 32px; padding-top: 30px;">Customer Details</h2>

    @if (ViewBag.GymCards != null && ((List<GymCard>)ViewBag.GymCards).Any())
    {
        <h4>Gym Memberships:</h4>
        foreach (var gymCard in (List<GymCard>)ViewBag.GymCards)
        {
            <div class="gym-membership-card">
                <div class="gym-name">Gym: @(gymCard.Gym.name != null ? gymCard.Gym.name : "Unknown")</div>
                <div class="price">Price: $@(gymCard.price)</div>
                <div class="dates">
                    <div class="made-date">Start Date: @(gymCard.madeDate.ToShortDateString())</div>
                    <div class="expiration-date">
                        Expiration Date: @(gymCard.expirationDate.ToShortDateString())
                        @if (IsExpired(gymCard.expirationDate))
                        {
                            <span style="color: red;">Expired</span>
                        }
                        else
                        {
                            <span style="color: green;">OnGoing</span>
                        }
                    </div>
                </div>
            </div>
        }
        <button class="menu-items" onclick="redirectToAllGyms()">
            <i class="fas fa-plus"></i>  Add New Gym Membership
        </button>
    }
    else
    {
        <p style="text-align: center; font-size: 20px; color: #555; line-height: 1.5;">Hey there! Looks like you currently do not have any subscriptions at our gyms... No worries, let's fix that! Click the button below to explore and add some amazing gyms to your favorites.</p>
        <button class="menu-items" onclick="redirectToAllGyms()">
            <i class="fas fa-store"></i> All Gyms
        </button>
    }

    <div class="slide-menu" id="slideMenu">
        <ul>
            <li><a href="/Authenticate/Login"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
            <li><a href="/Customer/Favourite/@((int)ViewBag.Customer.idc)"><i class="fas fa-heart"></i> Favorite</a></li>
            <li><a href="/Gym/AllGymCustomer/@((int)ViewBag.Customer.idc)"><i class="fas fa-store"></i> All Gyms</a></li>
            <li><a href="/Calculator/Calories"><i class="fas fa-calculator"></i> Calories Calculator</a></li>
            <li><a href="/Class/ClassesCustomer/@((int)ViewBag.Customer.idc)"><i class="fas fa-dumbbell"></i> My Gym Classes</a></li>

        </ul>
    </div>

    <div class="menu-toggle" onclick="toggleSlideMenu()">
        <i class="fas fa-bars"></i>
    </div>
</div>


<script>
        function toggleSlideMenu() {
            var slideMenu = document.getElementById("slideMenu");
            slideMenu.classList.toggle("show");

            var content = document.querySelector(".content");
            content.classList.toggle("slide-in-content"); 
        }

        function handleButtonClick(url) {
            window.location.href = url;
        }

        function redirectToAllGyms() {
            window.location.href = "/Gym/AllGymCustomer/@((int)ViewBag.Customer.idc)";
        }

</script>


